<template name="raffle">

    <div id="winner-announcement-popup"></div>

    <div class="raffle-top">
        {{#unless isDone }}
            {{#unless isMaster}}
                <form class="new-raffle-participant">
                    <div class="select-area">
                        <select name="participantId" required>
                            <option value="" selected>Select Person</option>
                            {{#each getPossibleUsers}}
                                <option value="{{_id}}">{{name}}</option>
                            {{/each}}

                        </select>
                    </div>
                    <div class="select-area">
                        <select name="numberOfTickets" required>
                            <option value="" selected>Select number of tickets</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>
                    <div>
                        <button type="submit" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
                            Enter into Raffle!
                        </button>
                    </div>
                </form>
            {{/unless}}
        {{/unless}}

        {{#unless isDone }}
            {{#if isMaster}}
                <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent mdl-button--big-ass-button">
                    Draw a winner!
                </button>
            {{/if}}
        {{/unless}}

    </div>


    <div class="mdl-typography--display-1">
        <h2 class="display-1">Participants in Raffle</h2>
    </div>

    <p class="status-paragraph">
        {{ numberOfParticipants }} participants in play. {{ numberOfTickets }} total tickets in the pool.
    </p>

    <table style="width: 100%" class="mdl-data-table mdl-js-data-table">
        <thead>
        <tr>
            <th class="mdl-data-table__cell--non-numeric">Name</th>
            <th>Tickets</th>
            {{#if isMaster}}<th></th>{{/if}}
        </tr>
        </thead>
        <tbody>
        {{#each winners}}
            <tr class="winner-row">
                <td class="mdl-data-table__cell--non-numeric">{{getNameFromUserId userId}}</td>
                <td>{{tickets}}</td>
                {{#if isMaster}}
                    <td>
                        <button id="deleteWinner" class="mdl-button mdl-js-button mdl-button--icon">
                            <i class="material-icons">delete</i>
                        </button>
                    </td>
                {{/if}}
            </tr>
        {{/each}}
        {{#each participants}}
            <tr>
                <td class="mdl-data-table__cell--non-numeric">{{getNameFromUserId userId}}</td>
                <td>{{tickets}}</td>
                {{#if isMaster}}
                    <td>
                        <button id="deleteParticipant" class="mdl-button mdl-js-button mdl-button--icon">
                            <i class="material-icons">delete</i>
                        </button>
                    </td>
                {{/if}}
            </tr>
        {{/each}}
        </tbody>
    </table>

    {{#if isMaster}}
        <div>
            {{#if isDone}}
                <button id="undoFinishRaffle" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect md-button--spacious">
                    Start Raffle Again
                </button>
            {{/if}}

            {{#unless isDone }}
                <button id="finishRaffle" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect md-button--spacious">
                    Finish Raffle
                </button>
            {{/unless}}
        </div>

        <div>
            <button id="deleteRaffle" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect md-button--spacious">
                Delete Raffle
            </button>
        </div>

    {{/if}}

</template>